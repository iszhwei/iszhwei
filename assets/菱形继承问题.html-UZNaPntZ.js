import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o as c,c as B,f as a,w as p,e as n,d as s,a as e}from"./app-m9pC5KT-.js";const i="/assets/20200315193559780-emx4MQ_G.png",r="/assets/20200315193547819-Ish21agl.png",y="/assets/20200315200300109-0tL3IGfa.png",A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAADLCAYAAAD+8so4AAAJBklEQVR4Ae1dDartJhCeW7qNgvDWUXAjBTdScCMFl+JC7gM3UlLGnxyNP1GPOfqKFy7HJMZ8TkYznzPq148fP47v72/4Ff9+R9BfX1+/Inb4bRxqAowzILpAPz3uCdeSBoEnQDkDEAKUfoLCJDBOr88be4w6DwBv/RMmDk7jMvC8YOStsovYYvDkYEIektO6hxJ2CMEOkhQAliUORuKKFUEly4rLSKgNAQIKFMHf+z/KGKhTXa75FUgJwNgz6hODp9ToLqFA79ATBoxKDfAK2x1jxSSl8AT8CDxilxIBESC34AkQpWwjdXCvvwqUooDljv67gEdVkSDBVIDePJFg7arAA+i8g9GH4AnVktTPQFA3rxsBKWU6xxIuzPM4eEIJKGnBKAlSVahOCfXD17R54J5BCAUmJDB3AgAUJSBEXrpGovnrWFTtG/IeW5X0wGOPwIFS1HjzR5gAoVttGhw27PtuxLy98426wgf8vnTeNj6/TK3PJb2vaBcACL7cnfrPbEmf4AN9dyVglwmFbk4JELJwHVWGMaC6HFfouF8LngBNfpGwjwYghS5TCqEBpj8JWC5+816qOA46AKBto20ZKQ8p+UE9u4JyPGf/C7bOQoZZbADdG1EJA4ywgxcqfF9mBY7Yqqy4yXs7LxDkYNxZl366t7yK+8aBr3hYstL99529zdCG9KHCBoL3eauffq4mg8BvDltHO71284UN9t8//wbBEp8ZpUAKDtxZmikNIAwEB+DMjRz4mQgwcxEKtp1/Q1v67G0oP2RApMlBmdAfqdTIgOsi8UNWuo4fsGoy70nVlV/6Leg8Sp0BR8MxZx6sxmGb3huOMFTRwLLx1vRML3NB8pjL2uIZqqeJSBX4T3BYr1YInHIOVAngmdZWy5Ce4rAek9LGNwjpkUAEzlO9SFDLaQeh2igBDJmT/Wc4WCpkuhu1kA2HLeOvfUPlUuKrIfjLdSUFMC4NG7pcw0PNYRPnw1PldhPmbTsqgtdF6QaZ6S1W4bDZOusBV0MHozxrcNgIlj5BKH76KYAegErnmclhtW3zx1//QNqJoQD1nnNZHEzF8R2mzNfYryKe58CBZbpaP29X+rRtGu2K0ObYHLbZJNZDH6EU+znlp8u57yq7lPEzNw0E7/NWP/1cRQaB3xx2RIPdflir6NsPm23xUYNFrr39sKe8rIPi1iN93lCdCCW//bDVgns7Y0DAtx82kuf2w0YiwRNng91+2Eg+2w+bN9g2h9Xk3fe9+ukHaeUYyT8IsDCqcfY2UVv7BU4MBO/zVj/9nBQGgd8cNt8l5vT+2mAJ44dwMTZSHILzg7NCXPHEWOJgxEwHBwl+0DNwmRzmnAtFiXuVmX7YE7x29l4inczwHY4mhBFQ57AeSj15j19JevDbPH7++rRtsDbGLBnIhoH8GJGa6DWW8MPaiO2sj0mKZOzAGn7YkusmIXB3qtbL95QfdlA/76rz2d+3wc/3w2p3peGaLbLLtpGgkKf9sDb4IStFyiAVS6QD/0uxxroSCP7RWGJTOIbdxj0iAZyvkgx2muyHPT9SAPgxMVOMzmlDhOqpQqVIJljFPABABmRCs3QMseBVc5x2LHHOciydv1qVp91Suil5zeetfrreVml+9jjwD4JMCguOtz9SQZf+4YOB4H3e6qefq9Eg8JvDNnPYfCwxxhGjHS/KsTawYiwxIfTgOKk3iC+Oe5SZHDar80pJ4IyDJAx40iozcZhLzYcN+wZp+CtO1AovmKMlOGwKmD2np9jZmOJrtjU47BWVf1wgKpvD+oJqTGcbbG05WfblFVD7hrxbqpL34AvDImtw2EI9TaPEKdWJTGvHElNgDOeFZ76ykzlsVm10HLEsz1zAd7FmLHHNHCmrSTuWOMOWitRwHA30eaufjo25IqCWSowD/yDITIVeDRatR4EjZ+UJLokOc94pI3nvNWtXjQxXBCLsYImVg/pev/csPciV93fdlq/B47CeDy6oADrVWDAr/7bQzGvGETnKL6Nw70x0z+q8rYCU6fWaeiowfFgwCz4hPeMx9NZCwIFZIbSf9hycTdynK/rEgGwLeA3iMm92Jtd99TadfcZMrvs2eFPnOVx3EHhc2glt5rRfy5jVNQtXtc2bHQbeLEyVB28qV9bNVn/tOPBlXI9c/Rj4J7juOPATuO4w8DO47iDwc7ju2+Cnct0W80CHbJ3xZ9bGQduG1i2oOdUw67Ekw3sGz5ttkXwIpJf2jSYjOTN28fOvBrs5bI0qjVabzWHvpb5MV7lEzHFPV2niixeIOW4Fb0YQUrHFn485fnWVVXRhrZjjNvCLxRw3grfrdKf8U4U3h7b+5rAXAbVJ/nJzy+F8Dltw5Zcq8pS/tk3yi8Uct4HHFdKlWep3iZjj1o/UUjHH7eDRAEOzdoGY4z7w9xZkmjJuDvsKYfys5HvfWPq+V2+zOWxaQqH+bw5r9D6r8/83P2z0+ifvwfNqsCXLKnlt/h48/eDNfgSgJu7B0w1+hbWfOsGvsQdPH/hF1n7qAh+shTNxD55gTadkp5I4ucraTx3g19mDp11tFtqDpxl8oO9OpSbtwdMI3o5VOtDn76Q9eLKGWeRMQwrn4svCUeLAP1vYkmYZ50JopNXY8Zhnc9jNYc/mOi1hGqzHK4NQXKvLO5bYNNgdS2y7cT0f9ufPn1Vqq/cRTM3QrJlf8sS82fqPlNX/SyyxDiuftAdPo3mQekHz9uAZAD5Vocu5h+bNDgJfXsPGhC0uGUs8bw+eDia1zh48fWqzyB48feAv7XHWHjxDwOu6aB/tZ/fgGQe+EMUND82bHQJ+1h48TbYN5XKtPXiabZuImFubp+r85rCbw156+wmHm8NWNdbNYV+NFQXW31XascvC2GQwJPjAfNg3vrDbD3t2UUoIkLcLd57ZdaJb8tsPGwiyfQ+ePslvP2wg9q6DLgK+/bCRrO3YT3L9pSizPtGu89sPG0uS4BJ7ySXk47zuTKPktx82NK4ADvTPClY3pzawl/oNsxbu6vJuDvt6c5+VvHsDY34bG6xr52v8XsCjjX7zpwOmOdDbjK4cXKOYA8vcQCgHnrnmSkj+Egb/AeJyTbvozsLuAAAAAElFTkSuQmCC",d="/assets/watermark_type_ZmFuZ3poZW5naGVpdGk_shadow_10_text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDQxNjkz_size_16_color_FFFFFF_t_70-t9XtC0RE.png",F="data:image/png;base64,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",v={},u=s("h1",{id:"菱形继承问题",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#菱形继承问题","aria-hidden":"true"},"#"),n(" 菱形继承问题")],-1),D=s("p",null,[s("strong",null,"多重继承：可以复用多个基类的代码到派生类中。")],-1),m=s("p",null,"但是多重继承中也会出现问题：我们来看一个经典的问题：",-1),C=s("strong",null,"A称为D的间接基类，D也有A的数据。",-1),b=s("pre",null,[s("code",null,`   假设A中有ma变量，B从A继承来并且有自己的mb，C从A继承来并且有自己的mc，D从B与C多继承而来，从B继承来了ma与mb，从C继承来了ma与mc，D也有自己的属性md；那么就出现了问题，<font color='red'>我们的**间接基类D有多份ma属性**，这就是菱形继承问题</font>。
`)],-1),g=s("figure",null,[s("img",{src:i,alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),f=s("p",null,[n("当然，我们多重继承还会出现别的问题： "),s("strong",null,"半圆形继承问题： B从A单一继承而来，C有一个基类B而且同时还从A继承而来。A到B为单继承，C为多继承。"),n(" 假设ma为类A的属性，B从A继承而来，B有自己的mb；C从B与A继承而来，C有自己的mc，又从A继承来了ma，从B继承来了mb与mc；产生了菱形继承同样的问题，C中出现了两个ma属性。")],-1),E=s("figure",null,[s("img",{src:r,alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),x=e(`<p><strong>我们用代码来实现一下菱形继承问题：</strong></p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">A</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">ma</span><span style="color:#ABB2BF;">(data)</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;A()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">~A</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;~A()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#C678DD;">protected:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> ma;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">B</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">A</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">mb</span><span style="color:#ABB2BF;">(data)</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;B()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">~B</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;~B()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#C678DD;">protected:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> mb;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">C</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">C</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">A</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">mc</span><span style="color:#ABB2BF;">(data)</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;C()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">~C</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;~C()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#C678DD;">protected:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> mc;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">D</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;"> , </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">C</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">D</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">B</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">C</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">md</span><span style="color:#ABB2BF;">(data)</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;D()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">~D</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;~D()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#C678DD;">protected:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> md;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	D </span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们画一下d对象的内存布局。</p><figure><img src="`+y+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>D能看见B，C与md，所以D在构造时调用B,C的构造及ma的初始化。ma的初始化在B与C的构造函数中进行，因此D内存为20个字节。打印一下：</p><figure><img src="'+A+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',6),N=s("strong",null,"那么如何处理这种问题呢？就需要虚继承来处理了。",-1),h=s("strong",null,"所有从A继承而来的地方都采用虚继承，A就为虚基类。",-1),w=e('<figure><img src="'+d+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>代码修改为如下：</strong></p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">A</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">ma</span><span style="color:#ABB2BF;">(data)</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;A()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">~A</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;~A()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#C678DD;">protected:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> ma;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">virtual</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">B</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">A</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">mb</span><span style="color:#ABB2BF;">(data)</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;B()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">~B</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;~B()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#C678DD;">protected:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> mb;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">C</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">virtual</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">C</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">A</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">mc</span><span style="color:#ABB2BF;">(data)</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;C()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">~C</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;~C()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#C678DD;">protected:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> mc;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">D</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;"> , </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">C</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">D</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">A</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">B</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">C</span><span style="color:#ABB2BF;">(data), </span><span style="color:#61AFEF;">md</span><span style="color:#ABB2BF;">(data)</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;D()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">~D</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;~D()&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#C678DD;">protected:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> md;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	D </span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打印结果：修改成功；A、B、C、D各初始化与析构一次。</p><figure><img src="`+F+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',5);function O(q,H){const l=t("font");return c(),B("div",null,[u,D,m,a(l,{color:"green"},{default:p(()=>[n("**菱形继承问题：会导致派生类有多份间接基类的数据，可以采用虚继承来解决。**")]),_:1}),n(" A为B、C的基类，B从A单继承而来，C从A也是单继承而来；D是B和C多继承而来，D有两个基类分别为B和C。"),C,b,g,f,E,a(l,{color:"red"},{default:p(()=>[n("多重继承虽然可以复用多个基类的代码到派生类中，但是会出现许多问题，因此C++开源代码上很少见到多重继承。")]),_:1}),x,a(l,{color:"red"},{default:p(()=>[n("先是A的构造，B的构造，又是A的构造，C的构造")]),_:1}),n("，最后是D的构造；析构顺序与其相反。我们发现，D这个派生类中调用了两次A的构造，"),a(l,{color:"red"},{default:p(()=>[n("数据重复，浪费内存，这种情况必须被杜绝。")]),_:1}),s("p",null,[N,h,n(" 此时："),a(l,{color:"green"},{default:p(()=>[n("B从A虚继承而来，A为虚基类，A::ma移动到派生类最后面，在A::ma位置上补一个vbptr；C也是从A虚继承而来，A::ma移动到派生类最后面，但发现已经有一份同样的虚基类的数据，那么C的A::ma丢弃，在A::ma位置存放vbptr。此时派生类中只有一份基类A::ma的数据，以后访问都是同一个ma；同时ma的初始化由D来负责")]),_:1}),n("。虚继承就可以解决多重继承中的菱形继承与半圆形继承出现的问题了。")]),w])}const z=o(v,[["render",O],["__file","菱形继承问题.html.vue"]]);export{z as default};
