import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r,o as c,c as p,d as e,e as s,f as n,w as l,a as i}from"./app-2pke9_a8.js";const d="/assets/8df8cad9058446bea96915ae1b8a4243-C0OABFo9.png",t="/assets/e2f8e0eae8dc41d6bb2c6bf89bd38759-4ZzqmGwq.png",y="/assets/3d68ba0a457e45299a90f2421d6317ae-mGHKC-gr.png",g="/assets/625a1a291ad2406380af5e6c5ce95483-kbB9hyYh.png",u="/assets/51957d8ec81e456185a650000ca6679f-ZwkdnXn-.png",b="/assets/7cbb9ec1de994fd5971f247d69d5037c-oPR9jd7Z.png",B="/assets/3058eabcba624e7ba1da0e6383692a9d-2lc6HyMI.png",k="/assets/aeaf140202004a73acc6c955ab5c8bc0-afXlQ5zD.png",m="/assets/6d79fc3f3c8847eeb8d0b9013356e8d4-JiXJFJVN.png",v="/assets/1b7cb0f5daa64a48b5925505dd430ebe-ljnmxeiS.png",h={},f=e("h1",{id:"key通用指令",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#key通用指令","aria-hidden":"true"},"#"),s(" key通用指令")],-1),x=e("strong",null,"key特征：",-1),_=e("u",null,"通过key获取redis中保存的数据",-1),D=i(`<p><strong>key应该设计那些操作？</strong></p><ul><li>对于key自身<strong>状态</strong>的相关操作：删除，判定存在，获取类型等</li><li>对于key<strong>有效性控制</strong>相关操作：有效期设定，判定是否有效，有效状态的切换等</li><li>对于key快速<strong>查询</strong>操作：按指定条件查询key</li></ul><h2 id="一、key基本操作" tabindex="-1"><a class="header-anchor" href="#一、key基本操作" aria-hidden="true">#</a> 一、key基本操作</h2><p>删除指定key</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">del </span><span style="color:#C678DD;">key</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>获取key是否存在</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">exists</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">key</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>获取key的类型</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">type</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">key</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+d+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="二、key扩展操作-时效性控制" tabindex="-1"><a class="header-anchor" href="#二、key扩展操作-时效性控制" aria-hidden="true">#</a> 二、key扩展操作（时效性控制）</h2><p><strong>为指定key设置有效期</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">expire </span><span style="color:#C678DD;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">seconds</span></span>
<span class="line"><span style="color:#ABB2BF;">pexpire </span><span style="color:#C678DD;">key</span><span style="color:#ABB2BF;"> milliseconds</span></span>
<span class="line"><span style="color:#ABB2BF;">expireat </span><span style="color:#C678DD;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">timestamp</span></span>
<span class="line"><span style="color:#ABB2BF;">pexpireat </span><span style="color:#C678DD;">key</span><span style="color:#ABB2BF;"> millinseconds-</span><span style="color:#C678DD;">timestamp</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+t+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>获取key剩余的有效时间</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">ttl </span><span style="color:#C678DD;">key</span></span>
<span class="line"><span style="color:#ABB2BF;">pttl </span><span style="color:#C678DD;">key</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+y+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>对于ttl命令的返回值</p><ul><li><code>-2</code>：<strong>key不存在，或存在已失效</strong></li><li><code>-1</code>：<strong>key没设置有效期</strong></li><li>剩余有效时间：key设置了有效时间，还没过期</li></ul><p><strong>切换key从时效性转换为永久性</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">persist </span><span style="color:#C678DD;">key</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,21),A=i(`<h3 id="三、key扩展操作-根据ex查询key" tabindex="-1"><a class="header-anchor" href="#三、key扩展操作-根据ex查询key" aria-hidden="true">#</a> 三、key扩展操作（根据ex查询key）</h3><p>查询key</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">keys pattern  # pattern写正则即可</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+g+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+u+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="四、key其他操作-改名、排序" tabindex="-1"><a class="header-anchor" href="#四、key其他操作-改名、排序" aria-hidden="true">#</a> 四、key其他操作（改名、排序…）</h3><p>为key改名</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">rename </span><span style="color:#C678DD;">key</span><span style="color:#ABB2BF;"> newkey    # 如果已经有newkey的数据，直接覆盖</span></span>
<span class="line"><span style="color:#ABB2BF;">renamenx </span><span style="color:#C678DD;">key</span><span style="color:#ABB2BF;"> newkey  # 不覆盖rename，如果已经有，则失败</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',9),F=i(`<div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">sort </span><span style="color:#C678DD;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[BY pattern]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[LIMIT offset count]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[GET pattern [GET pattern ...]</span><span style="color:#ABB2BF;">] </span><span style="color:#E06C75;">[ASC|DESC]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[ALPHA]</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">[STORE destination]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+B+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>其他key通用操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">help </span><span style="color:#E06C75;">@generic</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="五、数据库通用操作" tabindex="-1"><a class="header-anchor" href="#五、数据库通用操作" aria-hidden="true">#</a> 五、数据库通用操作</h2><p><strong>key重复问题</strong>： key是由程序员定义的，redis在使用过程中，伴随着操作数据量的增加，会出现大量的数据以及对应的key。数据不区分种类，类别混杂在一起，极易出现重复或冲突</p>`,6),C=e("strong",null,"解决方案",-1),q=i('<figure><img src="'+k+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>切换数据库</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">index</span><span style="color:#ABB2BF;">       # </span><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">11</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+m+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>其他操作</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">quit</span></span>
<span class="line"><span style="color:#ABB2BF;">ping               # 测试和服务器的连接</span></span>
<span class="line"><span style="color:#ABB2BF;">echo </span><span style="color:#C678DD;">message</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>数据移动</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">move</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">key</span><span style="color:#ABB2BF;"> db       # 若当前库没有key或目标库已经存在同名key，则返回0操作失败</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+v+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>数据清除</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">dbsize               # 获取当前库中，key的数量</span></span>
<span class="line"><span style="color:#ABB2BF;">flushdb              # 清空当前库的数据</span></span>
<span class="line"><span style="color:#ABB2BF;">flushall             # 清空所有库的数据</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11);function z(E,w){const a=r("font");return c(),p("div",null,[f,e("p",null,[x,s(" key是一个**"),n(a,{color:"cornflowerblue"},{default:l(()=>[s("字符串")]),_:1}),s("**，"),_]),D,e("p",null,[s("如果key处于有时效控制的状态，"),n(a,{color:"red"},{default:l(()=>[s("persist可修改key的状态为永久有效；如果key没有时效控制，persist操作失败")]),_:1})]),A,e("p",null,[s("对所有key排序，"),n(a,{color:"red"},{default:l(()=>[s("只能对list、set、zset类型排序")]),_:1}),s("，不修改数据，只是返回排序结果")]),F,e("p",null,[C,s("： redis为每个服务器提供有16个数据库，编号从0-15（默认使用0），"),n(a,{color:"green"},{default:l(()=>[s("每个数据库之间的数据互相独立，每个数据库之间可以存放同名的key")]),_:1})]),q])}const T=o(h,[["render",z],["__file","key通用指令.html.vue"]]);export{T as default};
