import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as r,c as B,d as s,f as l,w as o,e as n,a as p}from"./app-9OmaxHRC.js";const t="/assets/image-20240417102950835-kQ45u7m2.png",y="/assets/image-20240417103939490--BmXRoVk.png",i="/assets/image-20240417121948659-S0qeKgm_.png",A="/assets/image-20240417130014869-o1oZtnOA.png",d="/assets/image-20240417133201863-po0YN-rq.png",D="/assets/image-20240417133605734-myvozec_.png",F="/assets/image-20240417133852880-AWB3KjeG.png",u="/assets/image-20240417135920777-CWd3qomM.png",m="/assets/image-20240417141915871-T0zwXrQN.png",v="/assets/image-20240417142531847-0WuTCjnT.png",b="/assets/image-20240417145822248-3_8d60c9.png",C="/assets/image-20240417145735005-pc0_YLAG.png",g="/assets/image-20240417150327529-pIpwaRye.png",h="/assets/image-20240417150531893-bmaKk97r.png",f="/assets/image-20240417160612604-bcYBsvU0.png",_="/assets/image-20240417161703723-QdAj9pJP.png",x="/assets/image-20240417163604406-5HjuJRKg.png",k="/assets/image-20240417171054600-G02wIlT7.png",N={},q=p('<h1 id="多表select-连接查询" tabindex="-1"><a class="header-anchor" href="#多表select-连接查询" aria-hidden="true">#</a> 多表select-连接查询</h1><h2 id="为什么需要连接查询" tabindex="-1"><a class="header-anchor" href="#为什么需要连接查询" aria-hidden="true">#</a> 为什么需要连接查询</h2><p>当单表设计不满足范式设计时需要进行拆分，因此可能涉及到多表查询。连接查询相比单表查询<u>减少了TCP三次握手和四次挥手</u>，也<u>减少了mysql server对client sql的校验</u>过程。当然，一般满足范式三即可，范式越高表越多，连接查询效率越低。</p><figure><img src="'+t+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述" aria-hidden="true">#</a> 概述</h2><figure><img src="'+y+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>左连接：指的是表1特有的数据</p><p>内连接：指的是两个表的交集</p><p>右连接：指的是表2特有的数据</p><h2 id="内连接" tabindex="-1"><a class="header-anchor" href="#内连接" aria-hidden="true">#</a> 内连接</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#学生表</span></span>
<span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">TABLE</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">student</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#C678DD;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">INT</span><span style="color:#ABB2BF;"> UNSIGNED </span><span style="color:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">age </span><span style="color:#C678DD;">TINYINT</span><span style="color:#ABB2BF;"> UNSIGNED </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">sex ENUM(</span><span style="color:#98C379;">&#39;M&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;W&#39;</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#课程表</span></span>
<span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">TABLE</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">course</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">cid </span><span style="color:#C678DD;">INT</span><span style="color:#ABB2BF;"> UNSIGNED </span><span style="color:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#ABB2BF;">cname </span><span style="color:#C678DD;">VARCHAR</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;"> COMMENT </span><span style="color:#98C379;">&#39;课程名称&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">credit </span><span style="color:#C678DD;">TINYINT</span><span style="color:#ABB2BF;"> UNSIGNED </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;"> COMMENT </span><span style="color:#98C379;">&#39;学分&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#考试结果</span></span>
<span class="line"><span style="color:#C678DD;">CREATE</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">TABLE</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">exame</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#C678DD;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">INT</span><span style="color:#ABB2BF;"> UNSIGNED </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">cid </span><span style="color:#C678DD;">INT</span><span style="color:#ABB2BF;"> UNSIGNED </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">#</span><span style="color:#C678DD;">time</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">INT</span><span style="color:#ABB2BF;"> UNSIGNED </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;">, #int用时间戳表示考试时间  没有用date类型</span></span>
<span class="line"><span style="color:#C678DD;">time</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">DATE</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;">,	#</span><span style="color:#C678DD;">DATE</span><span style="color:#ABB2BF;">  年-月-日  比较明显</span></span>
<span class="line"><span style="color:#ABB2BF;">score </span><span style="color:#C678DD;">FLOAT</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">NOT NULL</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#C678DD;">PRIMARY KEY</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">uid</span><span style="color:#ABB2BF;">,cid) #一个学生有多门课，一个课又有多个学生，但是这两个组合在一起就是唯一的，使用联合主键</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">insert into</span><span style="color:#ABB2BF;"> student (</span><span style="color:#C678DD;">name</span><span style="color:#ABB2BF;">, age,sex) </span><span style="color:#C678DD;">values</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;zhangsan&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;M&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;gaoyang&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;W&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;chenwei&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">22</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;M&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;linfeng&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">21</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;W&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;liuxiang&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">19</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;W&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">insert into</span><span style="color:#ABB2BF;"> course(cname,credit) </span><span style="color:#C678DD;">values</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;C++基础课程&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;C++高级课程&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;C++项目开发&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">8</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;C++算法课程&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">12</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">insert into</span><span style="color:#ABB2BF;"> exame (</span><span style="color:#C678DD;">uid</span><span style="color:#ABB2BF;">,cid, </span><span style="color:#C678DD;">time</span><span style="color:#ABB2BF;">,score) </span><span style="color:#C678DD;">values</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-09&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">99</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-10&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">80</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-10&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">90</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-12&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">85</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-09&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">56</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-10&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">93</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;2021-04-12&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">89</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;2021-04-11&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-11&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">99</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-10&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">59</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-12&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">94</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;2021-04-11&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">95</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#单表查询</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">age</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sex</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> student </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> a </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">and</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#两张表的连接查询</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">age</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sex</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> student </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> a</span></span>
<span class="line"><span style="color:#C678DD;">inner join</span><span style="color:#ABB2BF;"> exame c </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">and</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13),T=s("li",null,[s("strong",null,"别名as，可以省略")],-1),w=s("li",null,[n("内连接inner join 或者 join，"),s("strong",null,"inner也可以省略")],-1),L=s("strong",null,"on 表示按什么连接",-1),E=s("mark",null,[n("连接语句中会先以"),s("strong",null,"数据量"),n("区分"),s("strong",null,"大表"),n("和"),s("strong",null,"小表"),n("，"),s("u",null,"小表永远是整表扫描，然后去大表搜索")],-1),U=s("li",null,"数据量，是满足where过滤后每个表剩余的数据的量（有可能a原本有20行，b有10行，满足where过滤后a还有5行，b不变，那么a为小表，b为大表）",-1),j=s("li",null,"因为小表永远整表扫描，有没有索引没意义",-1),I=s("li",null,[s("mark",null,"索引是否用到和select没有关系，要看where过滤时有没有用到")],-1),z=s("li",null,"即，从student表中取出所有的a.uid，然后拿着这些uid去exame大表中搜索",-1),O=p('<figure><img src="'+i+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#三张表的联合查询</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">age</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sex</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">credit</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span></span>
<span class="line"><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c</span></span>
<span class="line"><span style="color:#C678DD;">inner join</span><span style="color:#ABB2BF;"> student a </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span></span>
<span class="line"><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">and</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>先考虑表和表之间用什么字段关联，即先把表的连接写好，再写where过滤条件</li></ul><figure><img src="`+A+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',4),R=p(`<h3 id="练习" tabindex="-1"><a class="header-anchor" href="#练习" aria-hidden="true">#</a> 练习</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#获取每一门课考试人数</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(*) </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c</span></span>
<span class="line"><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#获取每一门课超过九十分的人数</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(*) </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c</span></span>
<span class="line"><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;">90</span></span>
<span class="line"><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#获取C++高级课程超过九十分的人数</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(*) </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c</span></span>
<span class="line"><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;">90</span></span>
<span class="line"><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">having</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">; #having用在分组后过滤</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#获取C++高级课程超过九十分的人数</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(*) </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c</span></span>
<span class="line"><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;">90</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">and</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#获取每一门课超过九十分的人数并排序</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(*) cnt </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c</span></span>
<span class="line"><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;">90</span></span>
<span class="line"><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">order by</span><span style="color:#ABB2BF;"> cnt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#56B6C2;">count</span><span style="color:#ABB2BF;">(*) cnt </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c</span></span>
<span class="line"><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;">90</span></span>
<span class="line"><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">order by</span><span style="color:#ABB2BF;"> cnt </span><span style="color:#C678DD;">desc</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+D+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+F+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">、cid</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">2这门课程考试成绩的最高分的学生信息和课程信息</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">credit</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> student a </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">order by</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">score</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">desc</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">#</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">、cid</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">2这门课程的考试平均成绩&amp;每门课程考试的平均成绩+课程信息</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">avg</span><span style="color:#ABB2BF;">(score) </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cname</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">credit</span><span style="color:#ABB2BF;">,</span><span style="color:#56B6C2;">avg</span><span style="color:#ABB2BF;">(score) </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame c </span></span>
<span class="line"><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> course b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">c</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span></span>
<span class="line"><span style="color:#C678DD;">group by</span><span style="color:#ABB2BF;"> cid;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+u+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="与limit相结合" tabindex="-1"><a class="header-anchor" href="#与limit相结合" aria-hidden="true">#</a> 与limit相结合</h3><p>select后<strong>字段的多少</strong>也会影响想查询效率</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> t_user </span><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1500000</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> id </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> t_user </span><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1500000</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> email </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> t_user </span><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1500000</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>对于偏移量我们之前是使用where 优化的</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> t_user </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> id</span><span style="color:#56B6C2;">&gt;</span><span style="color:#D19A66;">2500000</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p>但是有些情况我们<strong>不知道具体偏移量是多少，又想获取多列信息</strong>，那么该如何优化</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">email</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">password</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> t_user a </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> id </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> t_user </span><span style="color:#C678DD;">limit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1500000</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">) b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,16),M=p('<figure><img src="'+m+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+v+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="大小表" tabindex="-1"><a class="header-anchor" href="#大小表" aria-hidden="true">#</a> 大小表</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">#查看两个表内连接后两个表的所有信息</span></span>
<span class="line"><span style="color:#ABB2BF;">explain </span><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> a.*,b.* </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> student a </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> exame b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+C+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><mark>先执行where过滤，b就只剩3条数据，此时在进行内连接b就变成了小表，所以进行全表扫描</mark></li></ul><h3 id="条件过滤" tabindex="-1"><a class="header-anchor" href="#条件过滤" aria-hidden="true">#</a> 条件过滤</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> a.*,b.* </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> student a </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> exame b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> a.*,b.* </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> student a </span><span style="color:#C678DD;">join</span><span style="color:#ABB2BF;"> exame b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">and</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+g+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><p><strong>对于inner join内连接，过滤条件写在where的后面和on连接条件里面，效果是一样的</strong></p></li><li><p><strong>where 可以使用索引过滤，效率上比较快</strong></p><figure><img src="'+h+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ul><h2 id="外连接" tabindex="-1"><a class="header-anchor" href="#外连接" aria-hidden="true">#</a> 外连接</h2><h3 id="左外连接查询" tabindex="-1"><a class="header-anchor" href="#左外连接查询" aria-hidden="true">#</a> 左外连接查询</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">// 把left这边的表所有的数据显示出来，在右表中不存在相应数据，则显示NULL</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> a.* </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> User a </span><span style="color:#C678DD;">left outer join</span><span style="color:#ABB2BF;"> Orderlist b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">orderid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">is</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>outer 可以省略，加了left或right就左连接或右连接</li></ul><h3 id="右外连接查询" tabindex="-1"><a class="header-anchor" href="#右外连接查询" aria-hidden="true">#</a> 右外连接查询</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">// 把right这边的表所有的数据显示出来，在左表中不存在相应数据，则显示NULL</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> a.* </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> User a </span><span style="color:#C678DD;">right outer join</span><span style="color:#ABB2BF;"> Orderlist b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">orderid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">is</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+_+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>内连接小表全扫描</li><li>左连接表边表全扫描，右边匹配左边，没有为NULL</li><li>右连接右边表全扫描，左边匹配右边，没有为NULL</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;"># 查询所有没有考试的同学信息</span></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> * </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> student </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">not</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">in</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">select distinct</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> exame);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> a.* </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> student a </span><span style="color:#C678DD;">left join</span><span style="color:#ABB2BF;"> exame b </span><span style="color:#C678DD;">on</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">a</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">uid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">where</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">b</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">cid</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">not</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">is</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21),Y=s("li",null,[s("code",null,"select distinct uid from exame"),n("会产生一张中间表存储结果供外面的sql查询 "),s("ul",null,[s("li",null,"中间表也不一定都会产生，因为mysql server都会做优化，可以用explain 查看是否产生中间表")])],-1),G=s("code",null,"not in",-1),S=s("ul",null,[s("li",null,[n("in虽然会用到"),s("u",null,"索引"),n("但是一般也会产生"),s("u",null,"中间表"),n("，这也是为什么不喜欢用带in子查询的原因所在")])],-1),K=s("figure",null,[s("img",{src:x,alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),V=s("figure",null,[s("img",{src:k,alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),W=s("li",null,[s("mark",null,"外连接如果on后面只写连接条件，过滤条件全写在where后，外连接就会和内连接查询结果一样")],-1);function P(H,Q){const a=c("font");return r(),B("div",null,[q,s("ul",null,[T,w,s("li",null,[L,s("ul",null,[s("li",null,[E,s("ul",null,[U,j,s("li",null,[l(a,{color:"red"},{default:o(()=>[n("因此索引要建立在大表上")]),_:1})]),I])]),z])])]),O,l(a,{color:"red"},{default:o(()=>[n("注意：在使用`FROM`语句后的表与要连接的表之间，必须存在某种关联条件")]),_:1}),R,s("ul",null,[s("li",null,[n("原因在于小表是整表扫描获取id后存入到临时表，然后再去大表搜索，"),l(a,{color:"red"},{default:o(()=>[n("等价于单列搜索")]),_:1})])]),M,s("ul",null,[Y,s("li",null,[G,l(a,{color:"red"},{default:o(()=>[n("对于索引的命中并不高")]),_:1}),S])]),K,V,s("ul",null,[W,s("li",null,[s("mark",null,[n("对于"),l(a,{color:"red"},{default:o(()=>[n("外连接")]),_:1}),n("查询不在的情况，where后面值判断是否为null，其他"),l(a,{color:"red"},{default:o(()=>[n("约束条件写在on后面")]),_:1})])])])])}const Z=e(N,[["render",P],["__file","多表select-连接查询.html.vue"]]);export{Z as default};
