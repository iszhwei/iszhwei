import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o as c,c as o,d as n,e as s,f as l,w as e,a as p}from"./app-m9pC5KT-.js";const r="/assets/image-20240415105133754-My7cqy2b.png",A="/assets/image-20240415105431531-kjzYKZdG.png",d="/assets/20200315162327410-OVrn8Ik8.png",u="/assets/image-20240414204331841-Z61uE8HO.png",B="/assets/watermark_type_ZmFuZ3poZW5naGVpdGk_shadow_10_text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDQxNjkz_size_16_color_FFFFFF_t_70-gMA2aMvp.png",v="/assets/watermark_type_ZmFuZ3poZW5naGVpdGk_shadow_10_text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDQxNjkz_size_16_color_FFFFFF_t_70-17131007281165-TPYN3Z8p.png",b="/assets/image-20240415111605527-5PnLnlsT.png",y="data:image/png;base64,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",m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZ8AAAEOCAIAAADZuo0lAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAANnElEQVR4nO3d25HcNhoGUM6UAutEnIEjcJWkN0WgDJRIR2I5AWsD8Kp2HyjRFAmCAO/855wnic0GAXbjG4DNS/PXf77/9vsfzU/P57NZYeXbty2w/L1Ta3bLZ4sarJD/b1UdFr+9v+T5fBYWstUnWLIHZtcp3/+QMEg3gBhez64AwC6kGxCTdANieje7Rv+A7uPx2K8qu266LWqT+ieLej6f4yXdv/svbVgTIGN+7PZ4PE7pil0KtFu/yK9mU9E2tdq48pdqDgQ2P3Y7xeYDnJ1GbctC6vF4tOdeTKWkkR2s92+61U4D8zOv8uUlNq/POJWSL83OKKcGYrMVngo4YCs/ZqYLpoGPn5rRWZfly7eSnwkmE6Rf/5JyVlasZOVklYBlEjPTwt6V7Pn9IUm/nKnlW6ktfzBSm5ohruQHBDjRwuNu/X47yIL+wkHAJZfXbm5KbfmZNacWVs0l8zXJp6pAhPUSv5m2fXhZcd17xzPTTCCO1U4Ma8sfhEty/fF+KK/VoDKDtxjTwQFe/vrP9/fv33/5/GlwrKr799Qh8/5AYypZpspZMPmdfUtV/acaVbLRfIzmlzeiDQ7jKnogJFdiATFJNyAm6QbE9Nr87+wqAOzA2A2I6bV5ObsKADswdgNictwNiCna2G3NZWRAJNHSDaB10XvzLtAfsnXXcibHcQuWb1FB4Fh/fQt1namZKdB69aMCEFKcmWnLLBJo+VUBiEm6ATG9Nk7nBSIydgNikm5ATNINiEm6ATFJNyCm+bN5k08svqzap4UWPv5976fEewo9bG5m7NaFRaspexL7XfRbl19zWeiU76uQuxfOVXH3Sh2vit0F53pXeDZvvL6anMP2F2ZWGK+TXD61fv8t/fLbhc/n0/wU1qv4VeEWXa5kmtnUH54blz/IweTy5tdJfXKLycOa8f6WwPGK7oB0o85WeH+300NkaoC2OHaBgdKxW7z+dm7AtVsfjDRFG2yoKN3eTn/rIm/DoHG7YDjFy59///Px48cvnz9NrfEGz3cbFzL160GT3T/5lfNrAmv9+fc/kZ6rcDxDM7gmV2KtMj7zA7iIaM9VOJiJJFyWsRsQk3QDYpJuQEzSDYip4leFW5xJv9P93dZUZr/ygYzSsVvUMx6qQqdqJwxuHhd1B8JlFaWbntksjbZ96gLMezd7e7fxRUgxTDUnOZ2cul/b1PoDYg6ON3Pc7XZjkMKqDu7OliyhfyPJ5M0mM+sDpyv6VaHf/y/egdfHce0QNdiQFsJ417zkXn5rdx/LjOnWrP8Wdh1cjfPdqpXcFMTvpHC6+fu7te5y6lb5KKn/+0ByCDY+1pa5GVx+/cIqAVtyfzcgJDNTICbpBsQk3YCYpBsQk3QDYpJuQEzSDYhJugExRUs3z04GWtHSDaAV52nNg9s0NdN33FywfIsKAscKdp2pmSnQMjMFYoozM22ZRQItYzcgJukGxCTdgJikGxCTdANikm5ATNINiEm6ATFFO5v3RFUPnD/+6fRVD1dNPrn1MMmdc/we4+6M3baxa9/b5MrZx+NRXr0TQ6Rr7KDVg2dpw6xo6XbKVfQLoq08a95Uf+72ZDLLBBxVzEzXmp1GDVZIzhD7M8Hxe5vRVLG2/MXGU9Sp8muXL9Pun+fzaYrKrDjpdpf7u02NSgZL2g48CLvy8pufw9iVle9q2xWVLH+QtrPL4QBx0i05kJnqS7XLD9P2/zWTr70nbpk/DF0ir6ySuSebiJNuZ9l2rjQYH9VKzmo3lCk/+del/1K5TP0XHOLkzYr2q0L50fptN9qkDjC1qdds1Bu70i5o0NKpYFpZf9FGlZc///7n48ePXz5/Orsmtzfue8neOO7hg6loZmaXPFr/mPghYmp5ZkPjmo83XVJ+sp75LQ6224z2nmijWrDnKgC0os1MAVrSDYhJugExSTcgJukGxPT60rycXQeA7c1fq1B1vtLpas+KSp5KdlZlgA3NzEy7/rnfxT3nqoqequZ3K8fbaXALjruVWhBtgf8qwPW9KznsFvLGNVOJk5yJjwdi45cak1C4kpnjbt21hHc5hFRYw9l7XTSjm5pN7YHk+sDpZtJtcDX19Xvv+hSunUVm1jchhROVHne7eKhtZXC8bOX6p9yOCWj5VaHa+vuUAQeYSbc97sJ4Bf12je8mNl7e/HqQrtsPmfWBk3399l/3dwPiMTMFYpJuQEzSDYhJugExSTcgJukGxCTdgJikGxBTtHRzmRTQipZuAK355yrcRX/INrhx08CC5VtUEDhWsOtMzUyBlpkpEFOcmWnLLBJoGbsBMUk3ICbpBsQk3YCYpBsQk3QDYpJuQEzSDYhJugExSTcgJukGxCTdgJikGxCTdANikm5ATNINiEm6ATFJNyAm6QbEJN2AmKQbEJN0A2KSbkBMr03zsnmhHggPnO6XpzX3I+mYxx53W1y5uUw5tY0a5LLHP8NN/TszbXv14/Fo+/PiwVf3xpIRXD47yuuQKadrUYn+Tli5H4Bz/Ri7db06udLUyGi8PF9OlQvGylYjTeAA75JLN++9/dRLJuAgOPoDwEGV8jPN8gAqLAe4qXS6DUwlxXj54/HoT0jLU7ILtefz2c4Kp4aB/ZhrV86UM7W5QdrmVx5vGri+onSrkk+f9TYcVRmgQWDpdBuMm8qPu+1tPMNdI/9bxNTW828ELuJHunUzyq3OzOiKHZQ/WF5e5n6Bsnf5wClevn77/uHD+y+fPzXbne82lRfj5d2SZPDNLhy8PVnOeIg3Hvolyx+/BNzJ12/ff/v9j23L7A/TAE6x/a8KjfEOcAGuogdikm5ATNINiEm6ATFJNyCm+d9M73X+V/mpufdqF1BrZuzWhUWriXJtZtR2AZ2KmWnU/h+1XfDGlaZb1AiI2i6gYux2iyNT3Uyz6i27VAU4VVG63WiAU3WJ643aBdQqHbtFHeBEbRdQlG5RIyBqu4Bm9ny3wV0nmyiJELVdwL/2uL8bwOlciQXEJN2AmKQbEJN0A2KSbkBM0g2IqfSZWOsf5HyMZfd3W/n06ExRmQdUV5UzVY3x+pk9kHzJw6qJKtp1poX693drahqYeeB0sqip1KgtJ1P/wfpTb++WJGsY7yOG+btX+t53MpG0dzmZD2K8fBxYJRHsgyaYmXRbcEOhG6nqzyVB1t9dz59WllNSq2QJmVfXrw/XF+1XhcJcKDlKtcZgrLSyqP6kcmqkBgxES7fCqfQg1K48ZulH5CAua6vtOANvSrR0q1U+8Ck82D8bH1uV0y8tWcL41cxY0i+nxPPW063KOJiWHa5aUE4ymLaKKtFGSC9fv33/8OH9l8+fki/f7ihPeUcdh8viTSSL6p+ikaxVYTn5akxtN7Ot5Kz84h8rLOH+bkBIZqZATNINiEm6ATFJNyAm6QbEJN2AmKQbEJN0A2KSbkBM0g2ISboBMUk3ICbpBsQk3YCYpBsQk3QDYpJuQEzSDYhJugExSTcgJukGxCTdgJikGxCTdANikm5ATNINiEm6ATFJNyAm6QbEJN2AmKQbEJN0A2KSbkBM0g2ISboBMUk3ICbpBsQk3YCY3uVffj6f7T8ej0dmhalXI+l2RXP59k59arOf5mXdt+Z5x7RrvJV+t92jC/c7S7LwY3JjZuwW7Mu0xuPxuMXeGH9x88sXb+JIy/b88fWslW/XJvVf8Lmv327Xrk2+b4vNjN1mJT+eqH9p72Vq56/8UK4fGa271HPK5vUv/Nz32O7z+Xw+n/0KHJMMP9JtdqQ6NbgdLAygtl1T69cur7V3Ocnl3cLyP2BV9az9HnbrJJdPrd9/y+Jdd0C7xstrt1urdrsL9ueC79v48y1U+qtCNy/rbyYzOrjLPG6g25vlI+p+YwdfjvLlW9Wz/49+4fnl5fXsPtPCj3ir9nYGRXX/Ti4f13Nc4WVVOqZdzaj+tdud+twz1aja7oL9mfza5Msff76F/GY6qaT3Nj+/N4OdPvimDnrXePlWBt/OwuVT9SnsEnf0/HWidC/ln8vU5765lftzp36x9rhb0rJh5B0NRhD9l5J/ijPLz5KpzxWqt5O2aTdt4AWrvX5/7tEvXgdFX6fXnW7NyGWwJ8cThAXD7D2U1GdqP6wf2Y2HvXt8D48fgW7brj32f0l9ttpvJU3eqV+8fP32/cOH918+f0rWo1syHo6NaxAjE8dfyvHy/qv9PTP1CU2Vs2aPJctZsNE1bymp/4Jy1nwPk02Y3T8L7N2uqXKqmpBfeSp3yrdb2Fmq+lF5UfO+fvv+2+9/VLwBruT4oRlHWvP5+lWBG+u+9wIupLWfr7EbEJKxGxCTdANikm5ATNINiGmXaxXIKzm/8bI2PGXsFKvOn7qSwm9RmPYuYOx2tFufxND1qItca1GrX/+bNqFVWO0w7V1Guh3q7ukQyX13/rKa37e9i0k3qgXoJ/dtwrLDGvdt7xrSjQqDCwxvfRDnjpVfs9vv2N6VpNsJ7ntp5KB33boV99X//pS05e7tXcxvpicIcNCtf1uLO7rpQCZ5f5HaN74dxm68OW+tq7+19naM3ajw+Pl8o+6/Z9am3qD+zQ2b0OrPTDNNCNPehdwjBAjJzBSISboBMUk3ICbpBsQk3YCYpBsQk3QDYpJuQEzSDYhJugExSTcgJukGxCTdgJikGxCTdANi+j+DbGHrzjckCQAAAABJRU5ErkJggg==",f="/assets/20150827160607073-nTvusDov.png",g={},D=p(`<h1 id="虚基类和虚继承" tabindex="-1"><a class="header-anchor" href="#虚基类和虚继承" aria-hidden="true">#</a> 虚基类和虚继承</h1><h2 id="定义" tabindex="-1"><a class="header-anchor" href="#定义" aria-hidden="true">#</a> 定义</h2><p><strong>虚基类</strong>:被虚继承的类，就称为虚基类。</p><h2 id="virtual作用" tabindex="-1"><a class="header-anchor" href="#virtual作用" aria-hidden="true">#</a> virtual作用：</h2><ol><li><p>virtual修饰了<u>成员方法</u>是虚函数。</p></li><li><p>可以修饰<u>继承方式</u>，是虚继承。被虚继承的类就称为虚基类。</p></li></ol><h2 id="语法" tabindex="-1"><a class="header-anchor" href="#语法" aria-hidden="true">#</a> 语法</h2><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Baseclass</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Subclass</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;">/</span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;">/</span><span style="color:#C678DD;">protected</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">virtual</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Baseclass</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //...</span></span>
<span class="line"><span style="color:#C678DD;">private:</span><span style="color:#ABB2BF;">   </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //...</span></span>
<span class="line"><span style="color:#C678DD;">protected:</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //...</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//其中Baseclass称之为Subclass的虚基类, 而不是说Baseclass就是虚基类</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),h=n("strong",null,"vfptr",-1),x=n("u",null,"类有虚函数",-1),F=n("u",null,"生成的对象就有vfptr",-1),N=n("u",null,"指向vftable",-1),z=n("strong",null,"vbptr",-1),C=n("u",null,"在派生类中",-1),X=n("strong",null,"vftable",-1),P=n("strong",null,"向上偏移量",-1),T=n("strong",null,"偏移量",-1),W=n("strong",null,"vbtable",-1),L=n("u",null,"RTTI信息",-1),V=n("u",null,"虚函数地址",-1),k=p(`<h2 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h2><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#C678DD;">private:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> ma;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#C678DD;">private:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> mb;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//A a; 4个字节</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//B b; 8个字节</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里我们的对象a占4个字节，对象b占8个字节。但如果我们给B的<u>继承方式</u>访问限定符前面加了一个<code>virtual</code>关键字。</p><h3 id="内存分布" tabindex="-1"><a class="header-anchor" href="#内存分布" aria-hidden="true">#</a> 内存分布</h3><h4 id="查看方法" tabindex="-1"><a class="header-anchor" href="#查看方法" aria-hidden="true">#</a> 查看方法</h4><p><strong>使用命令：<code>cl –d1reportSingleClassLayout[classname] xxx.cpp</code>查看此时的内存布局。</strong></p><p>或者<strong>使用vs先配置项目属性，然后生成解决方案</strong>：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#abb2bf;">/d1 reportSingleClassLayout类名</span></span>
<span class="line"><span style="color:#abb2bf;">/d1 reportAllClassLayout</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+A+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="简单虚继承内存分布" tabindex="-1"><a class="header-anchor" href="#简单虚继承内存分布" aria-hidden="true">#</a> 简单虚继承内存分布</h4><p>类A被虚继承了，但内存布局没有变化。</p><figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>我们再看一下类B，不是之前的8个字节，<u>变为12个字节，多了一个vbptr指针。原来最上面应该为ma与mb，但是现在多了一个vbptr(虚基类指针)，ma跑到派生类最后面去了。vbptr指向的是vbtable，vbtable第一行为0，第二行为虚基类指针到虚基类数据的偏移量。</u></p><figure><img src="'+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>当我们遇到虚继承时候。要考虑派生类B的内存布局时，首先我们先不考虑虚继承。类B继承了基类的ma，还有自己的mb；当我们基类被虚继承后，基类变为虚基类，<u>虚基类的数据一定要在派生类数据最后面，再在最上面添加一个vbptr。</u>派生类的内存就由这几部分来构成。</p><figure><img src="'+B+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>虚基类指针(vbptr)指向虚基类表(vbtable)，vbtable第一行为向上的偏移量，因为vbptr在该派生类内存起始部分，因此向上的偏移量为0；第二行为向下的偏移量(vbptr离虚基类数据的偏移量)，原来基类的数据放到最后，<u>找ma的时候还是在最开始找，但ma被移动，根据偏移的字节就可以找到</u>。</p><figure><img src="'+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="含虚函数的内存分布" tabindex="-1"><a class="header-anchor" href="#含虚函数的内存分布" aria-hidden="true">#</a> 含虚函数的内存分布</h4><figure><img src="'+b+`" alt="image-20240415111605527" tabindex="0" loading="lazy"><figcaption>image-20240415111605527</figcaption></figure><ul><li>B类有两个虚函数表，一个是继承基类的，另一个是自己有虚函数创建的</li></ul><h3 id="菱形继承内存分布" tabindex="-1"><a class="header-anchor" href="#菱形继承内存分布" aria-hidden="true">#</a> 菱形继承内存分布</h3><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 基类A</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> dataA;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">virtual</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> dataB;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">C</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">virtual</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">A</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> dataC;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">D</span><span style="color:#ABB2BF;"> : </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">B</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">C</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> dataD;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+y+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+m+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="小结" tabindex="-1"><a class="header-anchor" href="#小结" aria-hidden="true">#</a> 小结</h2><p>结论一：单个虚继承，<strong>不带虚函数</strong> 虚继承与继承的区别</p><ol><li>多了一个虚基指针</li><li>虚基类位于派生类存储空间的最末尾</li></ol><p>结论二：单个虚继承，<strong>带虚函数</strong></p>',31),J=n("li",null,"如果派生类没有自己的虚函数，此时派生类对象不会产生虚函数指针",-1);function q(O,G){const a=t("font");return c(),o("div",null,[D,n("p",null,[h,s("：一个"),x,s("，这个类"),F,s("，"),N,s("。 "),z,s("："),C,l(a,{color:"green"},{default:e(()=>[s("从基类虚继承而来")]),_:1}),s("。 "),X,s("：第一行为"),P,s("，第二行为"),n("u",null,[l(a,{color:"green"},{default:e(()=>[s("虚基类指针")]),_:1}),s("离"),l(a,{color:"green"},{default:e(()=>[s("虚基类内存")]),_:1}),s("的"),T]),s("。 "),W,s(":存放的RTTI指针，指向运行时"),L,s("与"),V,s("。")]),k,n("ol",null,[J,n("li",null,[s("如果派生类拥有自己的虚函数，此时派生类对象就会产生自己本身的虚函数指针，并且该虚函数指针位于派生类对象存储空间的**"),l(a,{color:"red"},{default:e(()=>[s("开始位置")]),_:1}),s("**")])])])}const H=i(g,[["render",q],["__file","虚基类和虚继承.html.vue"]]);export{H as default};
