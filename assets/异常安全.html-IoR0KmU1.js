import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as t,c as r,b as i,d as s,e as n,f as l,w as p,a as e}from"./app-2pke9_a8.js";const B="/assets/1681304184845-87c43f84-fc0b-472f-ac86-2c5c6dfa9716-GFYDplbe.png",d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIUAAAAqCAYAAACdkJgHAAAEP0lEQVR4nO2cvY7qPBCG33P03YWbKGzz1S7pkBAVuQJTptgG0W3rlm5FQ5HSXEG2Qkh0LlOfBhCNryOnSBZCTIITfldnHmkKgjxjK29m7F0mAJCWjUuVSm5fdzIuU61lytuMvZFxqVMt+dPi/3T7jSJcQGmDOOwhjDW0EuBohpiEwOoLScNxxGuRK4SnUptUS37IFFyoVDV64kSqjEpF4ZpQJjUmtyYZhMtU6WycVoVx5Uwk1NGvUMdYBzudD5mTFUWhMzG0LB+X0jaXOjVKOPjKBKoETwGeCmWOfutE4TgPsnorlI8EX/Md+jOFScdH5380RCCrHNWFI9nsAP/tckniQ/S9NZaLBECCxXINr/mEiJac7CmSxQjd7ieWAPyBhtYKwtWTGKC3nkOWNMGlgjYGxhiYac99Zvst/hQ/u4iJuAm/7UsJ/mx3WH12MV75eJcut4JDvvuIPhelyxKzEFgFDIwxsI+1+8y8Dk5yw25Dm9cHURAFh1QSgh8/D/sedpvCreAS2hiocvoQE4RYoapybHJ/YnAmU5zzmXxhte9hIPhh3H6b541kg53Xx5DX+ATgdYaUWa7guMko7PizXX9pU8hlqo1JlTjdmAhlXzt+p3N/OpXS3hRW+aw8fXxvWOt8QhTWQaePFmZfbHT6eIE/VpHd1v7DtSQS3e7VXogX4hcydRDEgTOnD+Jfh0RBWJAoCAsSBWFBoiAsSBSEBYmCsCBREBYkCsKCREFYkCgICxIFYUGiICxIFIQFiYKwIFEQFiQKwsIWhVBZj8a5X21XIqDyMdqpJeC5cKnzNWpcnC6X0Fo+75fhQsE8OP75TLGPEDCGUaGN46SpR6tCKwAALDBiDEG0v+nkuNR3EJnAJNzhgzEw1rWal34GAso0aNRqiFv54BKTzhJjljX1BCsf09kTn55r4G/wnz2HF8dNFInEaLQ4dGglco51uYOrCi6hdF5aVEFI5bRcTJN5CYtDD14Y56ne8cmoigcOqQ1MHMJDD1PX8pEzVPqMz5bry7+TqqKM5Q1Sxmiogdv8bkm7jaYYoFfu9TwLh5yFwDwAYwHmCDFzuQuLUZaRoj32UZC1HLIRFhcH1sVLILsMLIiwx7pZ+fBCdJbjMz5bru/EJ0MQAeHkW/KZz91HAMbGWKJB/+2NaCEKATXtYT2Xl3s7H909frd4FT6vivc9rtSNf8bno2koCg6pp/Cj4GQTWsuju8fvEa/OZ9t4dZnWKQvfjwai4JA6Rn8VoNtky/7o7vF7xKvz+Yh4FguMnMppOxxFwSH1rLkgHt09XhfvKqrWcP36XNZg8wpHUjFB6BVPAq6ngQRyHAHvMYyJ8Y4I44OoFviMgDA2MGaGt61dOxM5x9oPEd8k3hXsI2wHszM+r1tf3Rr8aQxjZhjg8XsKoNx1XHiZWNXrBWwTqfp+fQG9a+rHGzUYExb0DzHC4i89DMGdHFBEeAAAAABJRU5ErkJggg==",y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAABJCAYAAABPeqbXAAAJMElEQVR4nO2dMWziSBfH//fpyutSnWgsNinSRZruspWlFcpJodtuKLlVmhwd7bR0LE10Rzl01xHpixCSq50rTrK03RawyM0o1Taf8tW+wjbYxjYGTMhk308aaTcM743t5+F5PO+9HwD4SMGlRq8+RPNSwE18wiDUGG0LgNNFszWCC4AJhXHbgtOtoTUKey7/1kRr5AJg4HKAnm0B8DBsXkK4ALiEakxw2x/BdQMdXAzQS8kDOKTuwfaG6N4KjMK+jF+j0wD6rfRYozEs0K21MMKe/PYW7//4ee3Pjx/+wqc/T3Axs3F2WvD9+QzO2f9w7jOsSwl5cPHXrwvglwtcqTP8tJQPADEd8xmcs8/4Fo7r6o+f8VOmwCfMLh/wGeXlnfSvYP+eLS2hF3W8zTyWUOffRX3Cnh8dPHS+5Z2NDOr47/8Z/pP10WjiANY7XLOc73pDdL82MNAaWmuM2wiNc9XFFbfoOh7s3hhaa2g9QOPrLZpDL6WshdvJKToDHfYbo/dugWFKHjBCq9ZEd/EON2O9lDloAJP+usECDNfvLMCZ7G+wAPDnJzgfH/G0l5AFPl26mD08JeXMn/D40YXz62KncT1cunicJ0f2NH/E7MM/ofGU51vnAe7DStbTwwyzeVbP8FjieuePMYMN+nzJO94P2xpsEn+9MV8o7WvJMz4zpHHpa618wV7AWIxuJ/7F7L3/3n/vv59d+CdHHw985H7AhK+MvejBTacEewFjMaz9cuG/7deXxnny21v/KjBZ/6p/cvzxAf4P4T8IIiDmTyd5Sv30H49Mn5b4jvn7M/758IinuB+75qseF5ppCeOgmZYwDjJawjjIaAnjyDFaDqkE8t4tEMQxeeaZlkNqDS3586qtACYUtNYwcOivjqTRMg4hFbTuwbbaGGsFKXhlMy4TN7DhYdiv5MUq8Z0SM1oOOe6hXZ+iWevC8YZo1m4xQQPXlcwu4V4Ab4r79Y0CBLEVwesxLn2ttS85fID7UgmfVfn6LSE/2RgXvlTK11qHTflK8t31M+5LpVfylPIlj7/SDfdWpI6RCZUaI/eljslJt6rPEbVS7Zl8WgZxYwPeEGueARPoNIDJ7SVqtVrQmlMs7B7GuzwMMgE17sFedNEM5TWngN0b7+CPjtCKZIS705xubTXOta2bxHOwMtrRBA4Au6cgeNHG0B3gHbQtwLnLuMiuQKsV7Y9d/a0/9ADrDc63VtWGFfrNkUhX3GLoAfYNrYi8BmIz7QitZheOZ6Hda4cPYhpK7v8gxhs2AAeTnOcvxiWUivbIRnt0LQB1nG6lnOG0jgy/2cV8gZ1uAuLlkXQP3BFalzXUal04noOh48Gyexjvs87DBALPoJ+5GZsJhXHPBqarn/P4z3FVfPnqYfubgHiJFPi0X3HfukTXAWDfQOx4sYOfawd3Isv7i1YUhrgVo4TrcP7G2k1hDoG8BebkhBrPxgexYIbKutjhiwItkTsPb5hl8+Fo2Pmf5euN3IB0qFDkNnzFlwKtVd8oxGFYGS0Xgf8av9iMo9PePc6KXb+DBQ/T3IVZF/dTD7Da6PBIMQOXN8i12Q2M+kN4sNDurHxxJgapB8F1vYwHN1ge7v0UHoB6o7qXLcTuLNcug/VSXXK9NFrDlD4v+nxjnBnzuUyu0UrBwjXTrHCfTXrLrNOGa7UxvUoKn6+t0yYbE9JXtE77ElqOwe15QfKNjhq1/dqBXi5EbsUdMp+/CGIPfjyM2BFaNdoUQxwGihEjjIMiFwjjIKMljIOMljAOMlrCOMhoCeNIxYgxcCGhwu2BatddMiuBYcxZuOVQyZ033hBERDJGbDBAAxPcNofYf2NgmIC5PkW3WUOt1kR3Wkd7rMhwib1Zf1XGhK/0nqkyM2PCyu5HoEYtvx3Mp82OVhhh4gCwG/nbGQliAwcy2vz9qxRBQOzLM6weMAiloZWg2ZWoBFryIozjQLu84rgQlzWI8H/kFRD7cqCZNj9kmwIMiX05mHswCpYJ0Eg4smHAYlW1vYjvksP5tKP+MqtLEDvIwClrIlERy0VbLvOSre0a65UMHtRKUswYtb0bRS4QxkFLXoRxkNESxkFGSxgHGS1hHGS0hHGQ0RLGQUZLGIchRrva3rhT4RBdPsQnKHJ3qJCgksfBZSKVfzXxeiv91cg6Hgc32uNWOmQQgzYs0xLhjVqxSj9VxOtFuBB3Dqz2wOg4PUNm2h3hHbQt2uuQYNTH0AuSTpvKqzZa3rCpQuQaYRZ0g+P0UkbLwKVa5j3QObVxGReQKpbPQKtU6aaoLkJUWgmwezEfbc2nK6cXAM75Ki9DcR6FYBukN73PL1DHOGSsFJSSIrtkU6qfVgqSJ/L8Z/qqRa7ReSy/hNZpeduSyi+xQZ47X2B926hZhLtnwpTvSvo8thOLcemLeBg4E76UItEHTASh4RnZw9dLd6ZbGb1hWVCtfSXCdPrLFPU5aewLyppGY1ZhODsLdUTp6xO72tb6ZR1T2bKlq+Molrc+zvxwfr4899H5YyWPfa8UAcdt8RO3e7r54PvrBrTJaMvpjS52Un7hdzdcuGAbZvq7kZ7V3wv7LY10W6PdJK+8gWWfgwJ5cUM3NP9E6B5sVyG8ygqLW1UmzyypZOFNxm86O60X6i2s7Fi2364VICuTl3f+XneFyq0fxJ6rwuK+uEnrK02Ql6Fsv+ryN+wlLywJG59EejYqHd9LYsto3E0VFl+W4e5C2eMI+jmVBWjuJc8borlNRXR2iiCXSlEpwJdLONNGxeDSlQ7LUlRhsYh99RYQVVXPfETO0xu6A7F+B6kAuaO8daLj2NINOH8DC8DC0JDopXvgirugAvlYIr5awriEWF737Sssbqp0WE7vLoR5w+qn2Xrvp6nKjgw8rOyYkHKQCpCb5CUGikB0B1mrWK64gwMbPSVin7NgWVJmvy4O/P38qvAmkHjq5FLFqhIqX4p0xcZtKyyWqXS4SW/Zp/OsFYSClYlUZcdV1cbUdyqrALk6Dp44J1nyivRvPn8qvSyZPpeGrhyE7egDOGB7FReo2rbpRjajHX0Ah21M+Mr8i1RRC25ig18q+ACFkBMG8qo3zBCvEzJawjjIaAnjIKMljOMZkip/b5zgYmbj7BTAfAbn7DO+HXtIr4x/Ab1PNsRuqtfUAAAAAElFTkSuQmCC",u="/assets/watermark_type_ZmFuZ3poZW5naGVpdGk_shadow_10_text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzc0NDI5Mw___size_16_color_FFFFFF_t_70-wWhTd13J.png",F={},v=s("h1",{id:"异常安全-当出现异常时-要保证程序是安全的-预判错误",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#异常安全-当出现异常时-要保证程序是安全的-预判错误","aria-hidden":"true"},"#"),n(" 异常安全--当出现异常时，要保证程序是安全的("),s("strong",null,"预判错误"),n(")")],-1),A=s("figure",null,[s("img",{src:B,alt:"1681304184845-87c43f84-fc0b-472f-ac86-2c5c6dfa9716",tabindex:"0",loading:"lazy"}),s("figcaption",null,"1681304184845-87c43f84-fc0b-472f-ac86-2c5c6dfa9716")],-1),D=s("p",null,[s("u",null,[n("程序的错误大致可以分为三种，分别是"),s("strong",null,"语法错误"),n("、"),s("strong",null,"逻辑错误"),n("和"),s("strong",null,"运行时错误")]),n("：")],-1),b=s("li",null,[n("语法错误在"),s("strong",null,"编译"),n("和"),s("strong",null,"链接"),n("阶段就能发现，只有 100% 符合语法规则的代码才能生成可执行程序。语法错误是最容易发现、最容易定位、最容易排除的错误，程序员最不需要担心的就是这种错误。")],-1),m=s("li",null,[n("逻辑错误是说我们编写的"),s("u",null,"代码思路有问题"),n("，不能够达到最终的目标，这种错误可以"),s("u",null,"通过调试来解决。")],-1),C=s("strong",null,"除数为 0、内存分配失败、数组越界、文件不存在",-1),h=s("u",null,"运行时错误",-1),g=e(`<p>运行时错误如果放任不管，系统就会执行默认的操作，终止程序运行，也就是我们常说的程序崩溃（Crash）。C++ 提供了<strong>异常（Exception）机制</strong>，让我们能够捕获运行时错误，给程序一次“起死回生”的机会，或者至少告诉用户发生了什么再终止程序。</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;string&gt;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">namespace</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">    string str </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;http://c.biancheng.net&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> ch1 </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;">  //下标越界，ch1为垃圾值</span></span>
<span class="line"><span style="color:#ABB2BF;">    cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">ch1</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> ch2 </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">at</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">);</span><span style="color:#7F848E;font-style:italic;">  //下标越界，抛出异常</span></span>
<span class="line"><span style="color:#ABB2BF;">    cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">ch2</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行代码，在控制台输出 ch1 的值后程序崩溃。下面我们来分析一下原因。 <code>at()</code> 是 string 类的一个成员函数，它会根据下标来返回字符串的一个字符。<strong>与[ ]不同，at() 会检查下标是否越界</strong>，如果越界就抛出一个异常；而[ ]不做检查，不管下标是多少都会照常访问。</p><blockquote><p>所谓<strong>抛出异常</strong>，就是<u>报告一个<strong>运行时</strong>错误，程序员可以根据错误信息来进一步处理</u>。</p></blockquote><p>上面的代码中，下标 100 显然超出了字符串 str 的长度。由于<u><code>str[100]</code>不会检查下标越界，虽然有逻辑错误，但是程序能够正常运行。而<code>str.at(100)</code>则不同，at() 函数检测到下标越界会抛出一个异常，这个异常可以由程序员处理，但是我们在代码中并没有处理，所以系统只能执行默认的操作，也即终止程序执行</u>。</p><h2 id="异常出现之前-c语言-处理错误的方式" tabindex="-1"><a class="header-anchor" href="#异常出现之前-c语言-处理错误的方式" aria-hidden="true">#</a> 异常出现之前/c语言 处理错误的方式</h2><p>在C语言的世界中，对错误的处理总是围绕着两种方法：一是<u>使用<strong>整型的返回值</strong>标识错误</u>；二是<u>使用<strong>errno宏</strong>（可以简单的理解为一个<strong>全局整型变量</strong>）去记录错误</u>。当然C++中仍然是可以用这两种方法的。</p>`,7),E=s("strong",null,"不一致",-1),x=s("u",null,"有些函数返回1表示成功，返回0表示出错；而有些函数返回0表示成功，返回非0表示出错",-1),f=s("strong",null,"返回值只有一个，你通过函数的返回值表示错误代码，那么函数就不能返回其他的值",-1),w=s("u",null,"当然，你也可以通过指针或者C++的引用来返回另外的值，但是这样可能会令你的程序略微晦涩难懂",-1),k=e(`<h2 id="捕获异常" tabindex="-1"><a class="header-anchor" href="#捕获异常" aria-hidden="true">#</a> 捕获异常</h2><p>我们可以借助 C++ 异常机制来<u>捕获上面的异常，避免程序崩溃</u>。捕获异常的语法为：<strong>try...catch语句块的catch可以有多个，但至少要有一个。</strong></p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 可能抛出异常的语句</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(异常类型){</span><span style="color:#7F848E;font-style:italic;">	//int double ……</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 处理异常的语句</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(exceptionType variable1){</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 处理异常的语句</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(exceptionType variable2){</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 处理异常的语句</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//类比switch case</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>try和catch都是 C++ 中的<strong>关键字</strong>，后跟语句块，<u>不能省略{ }</u>。try 中包含可能会抛出异常的语句，一旦有异常抛出就会被后面的 catch 捕获。<u>从 try 的意思可以看出，它只是“检测”语句块有没有异常，如果没有发生异常，它就“检测”不到。catch 是“抓住”的意思，用来捕获并处理 try 检测到的异常；如果 try 语句块没有检测到异常（没有异常抛出），那么就不会执行 catch 中的语句。</u></p><p>catch 关键字后面的<code>exceptionType variable</code>指明了当前 catch 可以处理的<strong>异常类型</strong>，以及<strong>具体的出错信息</strong>。</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;string&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;exception&gt;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">namespace</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">    string str </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;http://c.biancheng.net&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> ch1 </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">ch1</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(exception e){</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#98C379;">&quot;[1]out of bound!&quot;</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> ch2 </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">str</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">at</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">ch2</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(exception </span><span style="color:#56B6C2;">&amp;</span><span style="color:#ABB2BF;">e){</span><span style="color:#7F848E;font-style:italic;">  //exception类位于&lt;exception&gt;头文件中</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#98C379;">&quot;[2]out of bound!&quot;</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果： <img src="`+d+`" alt="1681212468246-41b064ed-63b7-4ef0-9763-446e058b91a5" loading="lazy"> 可以看出，第一个 try 没有捕获到异常，输出了一个没有意义的字符（垃圾值）。<u>因为[ ]不会检查下标越界，不会抛出异常，所以即使有错误，try 也检测不到</u>。换句话说，<strong>发生异常时必须将异常明确地抛出</strong>，try 才能检测到；如果不抛出来，即使有异常 try 也检测不到。所谓抛出异常，就是明确地告诉程序发生了什么错误。 第二个 try 检测到了异常，并交给 catch 处理，执行 catch 中的语句。需要说明的是，<u>异常一旦抛出，会立刻被 try 检测到，并且不会再执行异常点（异常发生位置）后面的语句</u>。本例中抛出异常的位置是第 17 行的 at() 函数，它后面的 cout 语句就不会再被执行，所以看不到它的输出。 说得直接一点，检测到异常后程序的执行流会发生跳转，从异常点跳转到 catch 所在的位置，位于异常点之后的、并且在当前 try 块内的语句就都不会再执行了；<u>即使 catch 语句成功地处理了错误，程序的执行流也不会再回退到异常点，所以这些语句永远都没有执行的机会了</u>。本例中，第 18 行代码就是被跳过的代码。</p><p><u>执行完 catch 块所包含的代码后，程序会继续执行 catch 块后面的代码，就恢复了正常的执行流。</u></p><p>关于「如何抛出异常」<strong>异常的处理流程</strong>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">抛出（Throw）--&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">检测（Try）</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">捕获（Catch）</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>try...catch语句块的catch可以有多个，但至少要有一个。</p></blockquote><h2 id="发生异常的位置-throw表达式" tabindex="-1"><a class="header-anchor" href="#发生异常的位置-throw表达式" aria-hidden="true">#</a> 发生异常的位置--throw表达式</h2><p><u>异常可以发生在当前的 try 块中，也可以发生在 try 块所调用的某个函数中，或者是所调用的函数又调用了另外的一个函数，这个另外的函数中发生了异常</u>。这些异常，都可以被 try 检测到。</p><p>throw+表达式, 如:</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> “the input is error.”;</span><span style="color:#7F848E;font-style:italic;">//抛出const char* 的异常类型</span></span>
<span class="line"><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">//抛出int型的异常类型</span></span>
<span class="line"><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">runtime_error</span><span style="color:#ABB2BF;">(“Data must refer to ISBN”);</span><span style="color:#7F848E;font-style:italic;">//抛出runtime_error类类型的异常类型，其中runtime_error是一个标准的异常处理</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="发生异常的位置" tabindex="-1"><a class="header-anchor" href="#发生异常的位置" aria-hidden="true">#</a> 发生异常的位置</h3><ol><li><u>try 块中</u>直接发生的异常：</li></ol><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;string&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;exception&gt;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">namespace</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Unknown Exception&quot;</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">  //抛出const char*类型的异常</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#98C379;">&quot;This statement will not be executed.&quot;</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">char</span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;</span><span style="color:#ABB2BF;">e){</span><span style="color:#7F848E;font-style:italic;">//抓取 异常类型 ，获取异常信息</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">e</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">Unknown</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">Exception</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">namespace</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">double</span><span style="color:#ABB2BF;"> x, y;</span></span>
<span class="line"><span style="color:#ABB2BF;">    cin </span><span style="color:#C678DD;">&gt;&gt;</span><span style="color:#ABB2BF;"> x </span><span style="color:#C678DD;">&gt;&gt;</span><span style="color:#ABB2BF;"> y;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">==</span><span style="color:#ABB2BF;"> y)</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> y;</span><span style="color:#7F848E;font-style:italic;">	//double</span></span>
<span class="line"><span style="color:#ABB2BF;">        }                                                                                     </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> (x </span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;"> y) </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl; </span></span>
<span class="line"><span style="color:#ABB2BF;">        }       </span></span>
<span class="line"><span style="color:#ABB2BF;">    }   </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">double</span><span style="color:#ABB2BF;"> d)  </span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;catch(double)&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }   </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> e)  </span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;catch(int)&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+y+`" alt="1681217280598-bdb7d4b4-bd17-4ebd-b18c-d2f8037978a4" tabindex="0" loading="lazy"><figcaption>1681217280598-bdb7d4b4-bd17-4ebd-b18c-d2f8037978a4</figcaption></figure><ol start="2"><li>下面的例子演示了 try 块中<u>调用的某个函数中</u>发生了异常：</li></ol><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;string&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;exception&gt;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">namespace</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">func</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Unknown Exception&quot;</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">  //抛出const char*异常</span></span>
<span class="line"><span style="color:#ABB2BF;">    cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#98C379;">&quot;[1]This statement will not be executed.&quot;</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">func</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#98C379;">&quot;[2]This statement will not be executed.&quot;</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">char</span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;</span><span style="color:#ABB2BF;">e){</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">e</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">Unknown</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">Exception</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>func() 在 try 块中被调用，它抛出的异常会被 try 检测到，进而被 catch 捕获。<strong>从运行结果可以看出，func() 中的 cout 和 try 中的 cout 都没有被执行。</strong></p><ol start="3"><li>try 块中<u>调用了某个函数，该函数又调用了另外的一个函数</u>，这个另外的函数抛出了异常：</li></ol><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;string&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;exception&gt;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">namespace</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">func</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Unknown Exception&quot;</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">  //抛出异常</span></span>
<span class="line"><span style="color:#ABB2BF;">    cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#98C379;">&quot;[1]This statement will not be executed.&quot;</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">func</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#98C379;">&quot;[2]This statement will not be executed.&quot;</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">char</span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;</span><span style="color:#ABB2BF;">e){</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">e</span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;">endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">Unknown</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">Exception</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="课堂代码" tabindex="-1"><a class="header-anchor" href="#课堂代码" aria-hidden="true">#</a> 课堂代码</h2><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> std::cout;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> std::endl;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> std::cin;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">double</span><span style="color:#ABB2BF;"> x, y;</span></span>
<span class="line"><span style="color:#ABB2BF;">    cin </span><span style="color:#C678DD;">&gt;&gt;</span><span style="color:#ABB2BF;"> x </span><span style="color:#C678DD;">&gt;&gt;</span><span style="color:#ABB2BF;"> y;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">==</span><span style="color:#ABB2BF;"> y)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        /* if( y = 1 ) */</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> y;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;(x/y) = &quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> x</span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;">y </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> e)</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;catch(int)&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">double</span><span style="color:#ABB2BF;"> d)</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">        cout </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;catch(double)&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">argc</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">**</span><span style="color:#E06C75;font-style:italic;">argv</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">test</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="寻找处理代码的过程-匹配catch的过程" tabindex="-1"><a class="header-anchor" href="#寻找处理代码的过程-匹配catch的过程" aria-hidden="true">#</a> 寻找处理代码的过程(匹配catch的过程)</h2><p>如果try语句块有嵌套。<strong>那么，在throw抛出异常后，寻找catch异常处理的代码是怎样的一个过程呢</strong>？答案就是<code>逐层向外寻找</code>。即本层throw出的异常，若在本层没找到对应的catch异常处理，则在<strong>调用它的层里继续匹配寻找</strong>。</p><p><code>注意</code>： <strong>当上述的匹配过程中最后都没能匹配到任何catch字句，<u>程序会转到terminate的标准库函数，程序非正常退出</u>。</strong></p>`,35),_=e('<h2 id="c-定义的标准异常类" tabindex="-1"><a class="header-anchor" href="#c-定义的标准异常类" aria-hidden="true">#</a> C++定义的标准异常类</h2><p>C++ 提供了一系列标准的异常，它们是以父子类层次结构组织起来的，如下所示：</p><figure><img src="'+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>下面是对异常类的说明：</p><table><thead><tr><th>异常</th><th>描述</th></tr></thead><tbody><tr><td><strong>std::exception</strong></td><td>该异常是所有标准 C++ 异常的父类。</td></tr><tr><td>std::bad_alloc</td><td>该异常可以通过 <strong>new</strong> 抛出。</td></tr><tr><td>std::bad_cast</td><td>该异常可以通过 <strong>dynamic_cast</strong> 抛出。</td></tr><tr><td>std::bad_typeid</td><td>该异常可以通过 <strong>typeid</strong> 抛出。</td></tr><tr><td>std::bad_exception</td><td>这在处理 C++ 程序中无法预期的异常时非常有用。</td></tr><tr><td><strong>std::logic_error</strong></td><td>理论上可以通过读取代码来检测到的异常。</td></tr><tr><td>std::domain_error</td><td>当使用了一个无效的数学域时，会抛出该异常。</td></tr><tr><td>std::invalid_argument</td><td>当使用了无效的参数时，会抛出该异常。</td></tr><tr><td>std::length_error</td><td>当创建了太长的 std::string 时，会抛出该异常。</td></tr><tr><td>std::out_of_range</td><td>该异常可以通过方法抛出，例如 std::vector 和 std::bitset&lt;&gt;::operator<a href=""></a>。</td></tr><tr><td><strong>std::runtime_error</strong></td><td>理论上不可以通过读取代码来检测到的异常。</td></tr><tr><td>std::overflow_error</td><td>当发生数学上溢时，会抛出该异常。</td></tr><tr><td>std::range_error</td><td>当尝试存储超出范围的值时，会抛出该异常。</td></tr><tr><td>std::underflow_error</td><td>当发生数学下溢时，会抛出该异常。</td></tr></tbody></table><h2 id="使用c-的标准异常类实例" tabindex="-1"><a class="header-anchor" href="#使用c-的标准异常类实例" aria-hidden="true">#</a> 使用C++的标准异常类实例</h2><p>例子:</p><ul><li><p>将<code>if (_b == 0) throw &quot;输入的分母是0。&quot;;</code>修改为 <code>if (_b == 0) throw runtime_error(&quot;输入的分母是0。&quot;);</code></p></li><li><p>将<code>catch(const char* s)</code>修改为<code>catch(runtime_error err)</code> 将<code>std::cout &lt;&lt; s</code>修改为<code>std::cout &lt;&lt; err.what()</code></p></li></ul><p>最后的结果和修改前一样，<strong>只不过使用的异常类。</strong></p>',9),q=s("strong",null,"注意",-1),M=s("code",null,"const char*",-1),G=e(`<div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;stdexcept&gt;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">namespace</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//bad_alloc异常类实例</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">0x</span><span style="color:#D19A66;">7fffffff</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;">  //无法分配这么多空间，会抛出异常</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (bad_alloc e)  {</span></span>
<span class="line"><span style="color:#ABB2BF;">		cerr </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">what</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//out_of_range异常类实例</span></span>
<span class="line"><span style="color:#ABB2BF;">	string s </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;I love China&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> c </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">s</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">at</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">);</span><span style="color:#7F848E;font-style:italic;">  //拋出 out_of_range 异常</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (out_of_range </span><span style="color:#56B6C2;">&amp;</span><span style="color:#ABB2BF;"> e) {</span></span>
<span class="line"><span style="color:#ABB2BF;">		cerr </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">what</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">$./a.out</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;">basic_string::at</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>从这个例子可以看出，有些异常是系统自动抛出，并不需要我们自己写抛出异常。</p><h2 id="如何定义和使用自己的异常类" tabindex="-1"><a class="header-anchor" href="#如何定义和使用自己的异常类" aria-hidden="true">#</a> 如何定义和使用自己的异常类</h2><p>我们可以通过<strong>继承C++标准异常类</strong>的方法来定义自己的异常类。</p><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;iostream&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;exception&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;stdexcept&gt;</span></span>
<span class="line"><span style="color:#C678DD;">using</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">namespace</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">std</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MyException</span><span style="color:#ABB2BF;"> :</span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">exception</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#C678DD;">public:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">MyException</span><span style="color:#ABB2BF;">() :</span><span style="color:#61AFEF;">c</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">nullptr</span><span style="color:#ABB2BF;">){}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">MyException</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">char*</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">_c</span><span style="color:#ABB2BF;">):</span><span style="color:#61AFEF;">c</span><span style="color:#ABB2BF;">(_c){}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">virtual</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">~MyException</span><span style="color:#ABB2BF;">(){}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//覆写what成员函数</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">char*</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">what</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">	{</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (c </span><span style="color:#C678DD;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">nullptr</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;MyException() error catch!&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> c;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#C678DD;">private:</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> c;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//默认参数-构造一个MyException类</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MyException</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (MyException </span><span style="color:#56B6C2;">&amp;</span><span style="color:#ABB2BF;"> myexp){</span></span>
<span class="line"><span style="color:#ABB2BF;">		cerr </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">myexp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">what</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">	//实际传参-构造一个MyException类</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MyException</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Error have been found.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;">(MyException </span><span style="color:#56B6C2;">&amp;</span><span style="color:#ABB2BF;"> myexp){</span></span>
<span class="line"><span style="color:#ABB2BF;">		cerr </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">myexp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">what</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">&lt;&lt;</span><span style="color:#ABB2BF;"> endl;</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">$./a.out</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;">MyException</span><span style="color:#ABB2BF;">() error catch!</span></span>
<span class="line"><span style="color:#ABB2BF;">Error have been found.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="异常规范-c-11标例子准中已经被废弃" tabindex="-1"><a class="header-anchor" href="#异常规范-c-11标例子准中已经被废弃" aria-hidden="true">#</a> 异常规范（C++11标例子准中已经被废弃）</h2><p>异常规范可以分为两类：</p><ol><li>动态异常规范（Dynamic Exception Specification）：使用关键字 throw() 或 noexcept 来指定函数不会抛出任何异常或只会抛出特定类型的异常。例如：</li></ol><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">myFunction</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;">();</span><span style="color:#7F848E;font-style:italic;"> // myFunction 不会抛出任何异常</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">myFunction</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">noexcept</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> // myFunction 不会抛出任何异常</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">myFunction</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;">(std::</span><span style="color:#E5C07B;">bad_alloc</span><span style="color:#ABB2BF;">);</span><span style="color:#7F848E;font-style:italic;"> // myFunction 只会抛出 std::bad_alloc 异常</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>静态异常规范（Static Exception Specification）：使用关键字 throw(...) 来指定函数可能会抛出任何类型的异常。例如：</li></ol><div class="language-c++ line-numbers-mode" data-ext="c++"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">myFunction</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;">(...);</span><span style="color:#7F848E;font-style:italic;"> // myFunction 可能会抛出任何类型的异常</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,13),N=s("p",null,"（异常安全有时间再看，先知道怎么用）",-1),O=s("h2",{id:"c-中使用异常时应注意的问题-总结",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#c-中使用异常时应注意的问题-总结","aria-hidden":"true"},"#"),n(" C++中使用异常时应注意的问题/总结")],-1),S=e("<li><u><strong>指针和动态分配</strong>导致的内存回收问题</u>：在C++中，不会自动回收动态分配的内存，<strong>如果遇到异常就需要考虑是否正确的回收了内存</strong>。</li><li>try块中如果抛出异常，会立即跳转到与异常相匹配的catch块中（<strong>throw后的语句不执行</strong>），执行完会再跳转到最后一个catch的下一条语句。</li><li>try和catch必须成对出现。catch通过()中的异常声明来匹配throw抛出的异常类型(也就是throw后接的表达式类型)</li><li>catch的匹配是逐层向外匹配。即当前函数没有catch，则在调用它的函数里找catch</li><li>若throw抛出的异常最终没有匹配到catch或则根本就没有catch，系统调用terminate后退出程序</li>",5),j=e("<li>函数的异常抛出列表：在C++中是如果你没有在函数的异常抛出列表指定要抛出的异常，意味着你可以抛出<strong>任何异常</strong>。</li><li>C++中<strong>编译</strong>时不会检查函数的异常抛出列表。这意味着你在编写C++程序时，如果在函数中抛出了没有在异常抛出列表中声明的异常，编译时是不会报错的。</li><li>catch的匹配过程中，对类型的要求比较<strong>严格</strong>。<strong>不</strong>允许<strong>标准算术转换</strong>和<strong>类类型的转换</strong>。（类类型的转化包括<strong>两</strong>种：通过构造函数的<strong>隐式类型转化</strong>和通过<strong>转化操作符</strong>的类型转化）</li>",3);function H(P,X){const a=c("font");return t(),r("div",null,[v,A,i("more"),D,s("ol",null,[b,m,s("li",null,[n("运行时错误是指程序在运行期间发生的错误，例如"),C,n("等。"),s("strong",null,[l(a,{color:"red"},{default:p(()=>[n("C++ 异常（Exception）机制就是为解决"),h,n("而引入的")]),_:1})]),n("。")])]),g,s("p",null,[n("这两种方法最大的"),l(a,{color:"red"},{default:p(()=>[n("缺陷")]),_:1}),n("就是会出现"),E,n("问题。例如"),x,n("。 还有一个缺点就是函数的"),f,n("。"),w,n("。")]),k,l(a,{color:"red"},{default:p(()=>[n("**对于没有任何try语句块的异常——即只用throw抛出了异常，却没有try catch来捕获异常，和上述情况类似，调用terminate后程序非正常退出。**")]),_:1}),_,s("p",null,[q,n("："),s("u",null,[l(a,{color:"red"},{default:p(()=>[n("异常类只定义了一个名为what的成员函数，该函数没有任何参数，返回值是一个指向C风格字符串的"),M]),_:1}),n('。该字符串的目的是提供有关异常的一些文本信息。就如"输入的分母是0。"提示一样。对于那些无初始值的异常类型来说，what返回的内容由编译器决定。')])]),G,l(a,{color:"red"},{default:p(()=>[n("需要注意的是，异常规范在C++11标准中已经被废弃，C++11引入了 noexcept 关键字来取代异常规范")]),_:1}),N,O,s("ol",null,[S,s("li",null,[l(a,{color:"red"},{default:p(()=>[n("try中声明的变量在外部无法访问，catch也不行")]),_:1}),n("。")]),j])])}const K=o(F,[["render",H],["__file","异常安全.html.vue"]]);export{K as default};
